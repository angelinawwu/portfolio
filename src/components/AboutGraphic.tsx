'use client';

import { useEffect, useRef, useState } from 'react';

const frames = [`
                                                                                                                                    
                                        ;           \`             ;                                          
                      ;                  ;;;        ;\`\`        \`;;                                           
                    ;;;                  ;;;;;     ;;\`;\`      ;;;;              ;;                           
                    ;;;                  ;;;;;;   ;;;\`\`;;   \`;;;;\`              ;;;                          
       ;\`\`         ;;;;;       \`\`        \`;;;;; \`;;;;\`\`;;;  ;;;;;                ;;;             \`\`\`;        
       \`;;;\`       ;;;;;     ;;;\`     \`   ;;\`;\`\`;;;;;\`\`;;;;\`;;;;; \`\`\`     ;\`    \`;;;           \`;;;;\`        
        ;;;;\`      \`;;;;\`   ;;;;\`   \`;;;;;\`\`\`;\`\`;;;;;\`\`;;;;\`\`;;;;\`\`;;;    ;;;\`  \`;;;\`         \`;;;\`\`\`;;;;\`   
  ;;;;; \`\`;;;       ;;;;\`  ;;;;;\`  ;;;;;;;;;\`\`\`;;;;;;\`\`\`;;;\`\`;;;\`\`\`;;;;\`  ;;;;;  ;;;\`   \`     ;;;\`\`;;;;;\`    
  \`;;;;;;\`\`;;\` ;;;;;\`;;;\` ;;;;;;    \`;;;;;;;;\`\`;;;;;;\`;;;\`;\`\`;;;\`\`\`;;;;\`\` ;;;;;;\`\`;; \`;;;;;\` \`;\`\`;;;\`;;\`     
   ;;;;;;;;\`;; ;;;;;;\`\`;\` ;;;;;       ;;;;;;\`\`\`\`;\`;;; ;;;\`;\`\`;;\`\`\`;;;\`     ;;;;;;;\`;\`;;;;;;\` ;;\`;;;;;;;      
   ;;;;;;\`;;\`;  ;;;+;; ; \`;;;;         \`;;;;;\`\`\`;;;;   ;;;\`\`\`;\`\`;;;;        ;;;;;; ;;;;;;;   ;\`;;;;;;;\`      
    ;;;;;;\`\`\`\`   ;;;;;; \`;         ;     ;;;;\`;\`\`\`;     ;;\`\`\`\`\`;;;\`    ;\`         ;;;;;;;    ;\`;;;;;;\`       
     \`;;;;;;\`\`    ;;;;\`  \`    ;;;;;;;;;    ;;;;\`\`\`       \`\`\`\`\`;;;  ;++;;\`;;++;\`   \`          \`;\`;;;;         
  ;;;\`\`\`;;;;;\`\`           ;;;;;\`    \`;++;;\`    ;;\`       ;;;    \`;+++;\`     ;;;;;            ;;;;\`\`\`\`;;;     
   \`;;\`\`\`;\`\`\`;;         ;;       \`;+++;;;;;+;   ;;       +;   \`++;;;;+++\`     \`  \`\`         ;;\`\`\`\`;;;;;\`     
    \`;;;;;;;;\`\`\`\`\`\` \`\`;\`        ;+\`\`;;\`\` \`  ;+\`  + ;; + \`+  \`+;\`   \`\`\`;;;+\`        \`;\`\` \` ;\`  \`;;;;;;;       
      \`\`;\`\`         ;        \`;+;  ; ;**+*    ;; \`;;  ;\`+\` ;;      +** \` \`;; \`       \`          \`\`\`\`         
 ;           \`\`    +         ++  \`**\`**+*+++  ;;; +    ;; ++   ******+ \`** ;+;         ;                 ;   
;;;   \`;   ;;;;;; ;         ++   *++\`****;+++  ;+;;;   ;\`;+;;  *+*****;*+;  ;+;         \` ;;;;;\`   \`    ;;\`  
;;;;  \`;;  ;;;;;\`          ++   \`*+*;\`**;;\`+++   ;\`;   +\`;    \`*;+;**+;***   ;+;;;      \` ;;;;;   \`;   ;;;;  
;;;;; \`;;\`      \`; ;;\`    +;;   \`;;+**;;\`++++\`   \`;;  \`;;\`    +*;***;+++++   \`;;;    \`\`; ;\`      \`;;  \`;;;;  
;;;;;\`\`;;;     \`;; ;;;   +  ;   ++****;*+++\`+\`  \`\`;;;\`;;;     *++***;++++++   ;;\`+  \`;;\` ;;;     ;;;\` ;;;;;  
;;;;;;\`;;;    \`;;; \`;;  +   ;   +++***++++**\`   \`\`\`\`\`\`\`\`\`\`\`   ;+**+*+++++;+;  ;  \`+ \`;;\` ;;;;    ;;;; ;;;;;  
;;;;;;\`;;;;   ;;;\`    \`+;   ;   *++**++;+++;    \`\`\`;\`;\`\`  \`   \`+;**;++++;+;;  ;   \`;\`    ;;;;   \`;\`;;;;;;;;  
\`;;;;; \`;;   \`;;;\`   ;;;    ;    *;+++++;+;;    \`;;;;;;\`\`\`\`    +++ +*;+;; +   ;    ;;\`   \`;;;\`   ;;;;;;;\`;;  
 ;;;;; \`;;   \`;;\`   + \`\`         +;+++++;;;;   \`;;++;;;;\`\`\`\`  \`*;+;++++;;    \`\`    \` \`;   ;;;;   ;\`;\`;;;\`;   
  ;;;; \`;\`  \`;;   \`;  +      ;    ;+;+++++;+  \`;;++++;;;;\`\`\`\`    *++++;      ;      ;  ;    ;;   ;;; ;;\`;;   
   ;;;\` ;        ;\`   ;\`      ;\`   * **;;     \`;;++++;;;;\`\`\`\`       ;+       \`      +    ;        ;; ;;;;    
     \`;;\`;    \`;\`    \`\`\`      \`\`              \`;;++++;;;;\`\`\`\`               ;      ;;\`    ;\`        ;;;\`     
        \`;;;;\`     \`;   ;\`\`\`\`\` \`\`             \`;;+++;;;;;\`\`\`\`              \`    \`\`; ;\`;\`    \`\`\`\`\`; \`         
       \`\`        \`;;; \` \`;;;;;\`  ;  \`;;;;\`    \`;;;;;;;;;\`\`\`\`\`     ;;\`\`   \`;  \`;;;;; \` ;;;;       \`           
    \`;;        \`;;;;; ;  ;\`\`;;;\` ;\`\`;;;;;;;\`  \`;;;;;;;;;\`\`\`\`\`   ;;;;\`;;;;;  ;;;;;\`  \` ;;;;;;        ;;\`      
   ;;;        \`;;;;;\` ;; \`;\`;;;; \` ; \`;;;;\`;\` \`\`;;;;;;;;\`\`\`\`\`   ;\`;\`\`\`\`; \` ;;;;\`;\` ;;  ;;;;;\`        ;;;;\`   
  ;;;;        ;;;;;;  ;;; \`;;;;;\`\`\`\`;\` \`;;;;;  \`;;;;;;;;\`\`\`\`\`  ;;;;\`\`\`;\` \`\`;;;;;\` ;;;  ;;;;;;        \`;;;;;  
 ;;;;;       \`;;;;;; \`;;;;  \`;;;;\`; ;;;\`     \` \`\`;;\`\`;;\`\`\`\`\`  \`;;; \`\`;; ;\`\`;;;;  ;;;;   ;;;;;;        ;;;;;; 
 ;;;;        \`;;;;;  \`;;;;;      ;; \`;;;       \`\`\`\`;;\`;\`\`\`\`\`       ;\`;; ;\`;     ;;;;;   ;;;;;;         ;;;;; 
\`;;;         ;;;;;    ;;;;;      ;;\`\`;;;\`       \`\`;\`;;\`\`\`\`\`       \`;;;\` ;\`;     ;;;;;    \`;;;;\`         ;;;; 
 ;;          \`;;\`     ;;;;;\`     ;;\` ;;;;       \`\`\`\`\`\`\`\`\`\`\`       ;;;;  ;;;     ;;;;\`      \`;;\`         \`+;; 
 ;;          ;\`        ;;;;\`     ;;   ;;;        \`\`;\`\`\`\`          \`;;\`  ;;;     ;;;;          \`         \`;\`  
                        \`;;;     ;;    \`\`        \`;;;;\`\`\`\`         ;;   ;;\`    \`;;                           
                           \`     \`      \`                          \`     ;    \`\`\`                            `];

export default function AboutGraphic() {
  const preRef = useRef<HTMLPreElement>(null);
  const [fontSize, setFontSize] = useState(8);
  const [lineHeight, setLineHeight] = useState(8);

  useEffect(() => {
    let timeoutId: NodeJS.Timeout;

    const updateSize = () => {
      if (preRef.current) {
        const containerWidth = preRef.current.clientWidth || window.innerWidth;
        
        // Original uses charRatio = 0.66 and lineHeight = charRatio * charWidth
        const charRatio = 0.72;
        
        // The ASCII art is roughly 105 characters wide
        // Calculate font size to fit the container
        const charWidth = (containerWidth / 105) * charRatio;
        const charHeight = charRatio * charWidth;
        
        setFontSize(charWidth);
        setLineHeight(charHeight);
      }
    };

    const debouncedUpdateSize = () => {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(updateSize, 150);
    };

    updateSize();
    window.addEventListener('resize', debouncedUpdateSize);
    return () => {
      window.removeEventListener('resize', debouncedUpdateSize);
      clearTimeout(timeoutId);
    };
  }, []);

  if (!frames || frames.length === 0) {
    return null;
  }

  const frame = frames[0]?.replace(/^\n+/, '') ?? '';

  return (
    <pre
      ref={preRef}
      className="w-full text-center font-bold font-mono text-blue opacity-100 overflow-visible m-0 p-0 whitespace-pre"
      style={{
        fontSize: `${fontSize}px`,
        lineHeight: `${lineHeight}px`,
      }}
    >
      {frame}
    </pre>
  );
}